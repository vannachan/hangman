<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Link to Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Londrina+Outline|Londrina+Shadow&display=swap" rel="stylesheet"> 

    <!-- <link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great&display=swap" rel="stylesheet">  -->

    <link href="https://fonts.googleapis.com/css?family=Francois+One&display=swap" rel="stylesheet">


    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">


    <link rel="stylesheet" href="styles/style.css">
    <title>Hangman</title>
</head>
<body>
    <h1>Hangman</h1>
    <h2>Pick a letter and guess the word!</h2>
    
    <div class="guessContainer">
        <span class="guessesLeft">Guesses left:</span>
        <span class="guessCount"></span>
    </div>
    
    <button class="playAgain">Play again</button>
    <section class="guessWord">
    </section>

    <h3></h3>
    <p></p>

    <!-- <form class="pickLetter">
        <label class="letterLabel" for="pickALetter">Choose a letter to guess:</label>
        <select id="pickALetter" name="pickALetter">
            <option class="pleaseSelect" value="pleaseSelect">-- Select a letter --</option>
            <option class="a" value="a">A</option>
            <option class="b" value="b">B </option>
            <option class="c" value="c">C</option>
            <option class="d" value="d">D</option>
            <option class="e" value="e">E</option>
            <option class="f" value="f">F</option>
            <option class="g" value="g">G</option>
            <option class="h" value="h">H</option>
            <option class="i" value="i">I</option>
            <option class="j" value="j">J</option>
            <option class="k" value="k">K</option>
            <option class="l" value="l">L</option>
            <option class="m" value="m">M</option>
            <option class="n" value="n">N</option>
            <option class="o" value="o">O</option>
            <option class="p" value="p">P</option>
            <option class="q" value="q">Q</option>
            <option class="r" value="r">R</option>
            <option class="s" value="s">S</option>
            <option class="t" value="t">T</option>
            <option class="u" value="u">U</option>
            <option class="v" value="v">V</option>
            <option class="w" value="W">W</option>
            <option class="x" value="x">X</option>
            <option class="y" value="y">Y</option>
            <option class="z" value="z">Z</option>
        </select>
        <input type="submit" value="Submit">
    </form> -->

        <!-- Normal Alphabetical Format -->
        <!-- <button class="a letterButton" value="a">A</button>
        <button class="b letterButton" value="b">B </button>
        <button class="c letterButton" value="c">C</button>
        <button class="d letterButton" value="d">D</button>
        <button class="e letterButton" value="e">E</button>
        <button class="f letterButton" value="f">F</button>
        <button class="g letterButton" value="g">G</button>
        <button class="h letterButton" value="h">H</button>
        <button class="i letterButton" value="i">I</button>
        <button class="j letterButton" value="j">J</button>
        <button class="k letterButton" value="k">K</button>
        <button class="l letterButton" value="l">L</button>
        <button class="m letterButton" value="m">M</button>
        <button class="n letterButton" value="n">N</button>
        <button class="o letterButton" value="o">O</button>
        <button class="p letterButton" value="p">P</button>
        <button class="q letterButton" value="q">Q</button>
        <button class="r letterButton" value="r">R</button>
        <button class="s letterButton" value="s">S</button>
        <button class="t letterButton" value="t">T</button>
        <button class="u letterButton" value="u">U</button>
        <button class="v letterButton" value="v">V</button>
        <button class="w letterButton" value="W">W</button>
        <button class="x letterButton" value="x">X</button>
        <button class="y letterButton" value="y">Y</button>
        <button class="z letterButton" value="z">Z</button> -->

        <!-- Qwerty Format -->
        <div class="keyboard rowOne">
            <button class="q letterButton" value="q">Q</button>
            <button class="w letterButton" value="W">W</button>
            <button class="e letterButton" value="e">E</button>
            <button class="r letterButton" value="r">R</button>
            <button class="t letterButton" value="t">T</button>
            <button class="y letterButton" value="y">Y</button>
            <button class="u letterButton" value="u">U</button>
            <button class="i letterButton" value="i">I</button>
            <button class="o letterButton" value="o">O</button>
            <button class="p letterButton" value="p">P</button>
        </div>

        <div class="keyboard rowTwo">
            <button class="a letterButton" value="a">A</button>
            <button class="s letterButton" value="s">S</button>
            <button class="d letterButton" value="d">D</button>
            <button class="f letterButton" value="f">F</button>
            <button class="g letterButton" value="g">G</button>
            <button class="h letterButton" value="h">H</button>
            <button class="j letterButton" value="j">J</button>
            <button class="k letterButton" value="k">K</button>
            <button class="l letterButton" value="l">L</button>
        </div>

        <div class="keyboard rowThree">
            <button class="z letterButton" value="z">Z</button>
            <button class="x letterButton" value="x">X</button>
            <button class="c letterButton" value="c">C</button>
            <button class="v letterButton" value="v">V</button>
            <button class="b letterButton" value="b">B</button>
            <button class="n letterButton" value="n">N</button>
            <button class="m letterButton" value="m">M</button>
        </div>


    <!-- JAVA LANDDDD -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
        // Initializing the hangMan object
        const hangMan = {};
        hangMan.wordArray = ['receipt', 'sunscreen', 'basketball', 'violin', 'toronto', 'hackeryou', 'lightbulb', 'iceskating', 'keyboard'];
        hangMan.charArray = [];

        // =================================================================== //
        // == Function Name: Setup                                          == //
        // =================================================================== //
        // ==   Description: Randomly selects word from predetermined array == //
        // ==                and populate dynamic DIVs on page.             == //
        // =================================================================== //
        hangMan.setup = function() {
            const wordIndex = Math.floor( Math.random() * this.wordArray.length );
            this.charArray = this.wordArray[wordIndex].split('');

            for (let i = 0; i < this.charArray.length; i++) {
                $('section.guessWord').append(`<div class="letterContainer"><span class="${this.charArray[i]} guessLetter hideLetter">${this.charArray[i]}</span></div>`);
            }
        };

        // =================================================================== //
        // == Function Name: Init                                           == //
        // =================================================================== //
        // ==   Description: Randomly selects word from predetermined array == //
        // ==                and populate dynamic DIVs on page.             == //
        // =================================================================== //
        hangMan.init = function() {
            let guessCnt = 10;
            $('span.guessCount').text(guessCnt);

            let totalLetterCorrect = 0;
            console.log(totalLetterCorrect);

            // - On letter button click
            $('.letterButton').on('click', function(event){
                event.preventDefault();

                // Check that a valid letter was selected
                const selectedValue = $(this).attr('value');
                console.log(selectedValue);
                // if (selectedValue == 'pleaseSelect') {
                //     alert("Please select a letter!");
                // } else {
                    if (guessCnt > 0) {
                        
                        // disable the letter that was just guessed
                        $(this).attr('disabled', 'disabled');

                        let letterCorrect = 0;
                        for (let i = 0; i < hangMan.charArray.length; i++) {
                            if (selectedValue === hangMan.charArray[i]) {
                                totalLetterCorrect++;
                                letterCorrect++;
                                console.log("Total correct:",totalLetterCorrect);
                                console.log(`Letters correct: ${letterCorrect}`);

                                $(`span.${selectedValue}`).removeClass('hideLetter');
                                $(`span.${selectedValue}`).addClass('showLetter');

                                if (totalLetterCorrect === hangMan.charArray.length) {
                                    $('h3').text("YOU WIN!!!");

                                    // User already won, so disable guessing capabilities
                                    // $('.letterButton').attr('disabled', 'disabled');
                                    $('.keyboard').addClass('hideKeyboard');
                                    break;
                                }
                            }
                        }

                        // TODO: generate an array of strings and randomly display
                        if (letterCorrect === 0) {
                            guessCnt--;

                            $(this).addClass('incorrect');
                            $('span.guessCount').text(guessCnt);
                            console.log(`Guesses left: ${guessCnt}`);

                            $('p').text(`Better luck next time, there are no ${selectedValue.toUpperCase()}'s here.`);
                        } else {
                            $(this).addClass('correct');
                            $('p').text(`Nice work! There are ${letterCorrect} ${selectedValue.toUpperCase()}'s in the word.`);
                        }

                        // finished searching through the character array and no guesses left
                        if (totalLetterCorrect < hangMan.charArray.length && guessCnt === 0) {
                            $('span.guessLetter').removeClass('hideLetter');
                            $('span.guessLetter').addClass('showLetter');
                            $('.keyboard').addClass('hideKeyboard');
                            // $('.letterButton').attr('disabled', 'disabled');
                            // $('.letterButton').addClass('disabled');
                            $('h3').text("YOU LOSEEEeeEEeEEE!!!");
                        }
                    }
                // }
            })
        };

        // =================================================================== //
        // == Function Name: Reload                                         == //
        // =================================================================== //
        // ==   Description: Clean up HTML and repopulate the page for a    == //
        // ==                new game of hangman!                           == //
        // =================================================================== //
        hangMan.reload = function() {
            // Clean up all the stuff we disabled and changed in the HTML
            $('section.guessWord').html('');
            $('select').removeAttr('disabled');
            $('option').removeAttr('disabled');
            $('input[type=submit]').removeAttr('disabled');

            // Now repopulate and set it up as a new game
            hangMan.setup();
            hangMan.init();
        }

        // When the document is ready, let's run the app
        $(document).ready(function(){
            hangMan.setup();
            hangMan.init();

            // If PlayAgain button is pressed, reload everrrything!
            // FIXME: this is instantiating multiple init() functions
            $('.playAgain').on('click', function(){
                hangMan.reload();
            })
        });
    </script>
</body>
</html>