<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Link to Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Londrina+Outline|Londrina+Shadow&display=swap" rel="stylesheet"> 

    <!-- <link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great&display=swap" rel="stylesheet">  -->

    <link href="https://fonts.googleapis.com/css?family=Francois+One&display=swap" rel="stylesheet">


    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">


    <link rel="stylesheet" href="styles/style.css">
    <title>Hangman</title>
</head>
<body>

    <!-- TODO: fix the navigation pane -->
    <h1>Hangman</h1>
    <h2>Pick a letter and guess the word!</h2>
    
    <div class="guessContainer">
        <span class="guessesLeft">Guesses left:</span>
        <span class="guessCount"></span>
    </div>
    
    <button class="playAgain">Play again</button>
    <section class="guessWord">
    </section>

    <h3></h3>
    <p></p>

    <!-- <form class="pickLetter">
        <label class="letterLabel" for="pickALetter">Choose a letter to guess:</label>
        <select id="pickALetter" name="pickALetter">
            <option class="pleaseSelect" value="pleaseSelect">-- Select a letter --</option>
            <option class="a" value="a">A</option>
            <option class="b" value="b">B </option>
            <option class="c" value="c">C</option>
            <option class="d" value="d">D</option>
            <option class="e" value="e">E</option>
            <option class="f" value="f">F</option>
            <option class="g" value="g">G</option>
            <option class="h" value="h">H</option>
            <option class="i" value="i">I</option>
            <option class="j" value="j">J</option>
            <option class="k" value="k">K</option>
            <option class="l" value="l">L</option>
            <option class="m" value="m">M</option>
            <option class="n" value="n">N</option>
            <option class="o" value="o">O</option>
            <option class="p" value="p">P</option>
            <option class="q" value="q">Q</option>
            <option class="r" value="r">R</option>
            <option class="s" value="s">S</option>
            <option class="t" value="t">T</option>
            <option class="u" value="u">U</option>
            <option class="v" value="v">V</option>
            <option class="w" value="W">W</option>
            <option class="x" value="x">X</option>
            <option class="y" value="y">Y</option>
            <option class="z" value="z">Z</option>
        </select>
        <input type="submit" value="Submit">
    </form> -->

        <!-- Normal Alphabetical Format -->
        <!-- <button class="a letterButton" value="a">A</button>
        <button class="b letterButton" value="b">B </button>
        <button class="c letterButton" value="c">C</button>
        <button class="d letterButton" value="d">D</button>
        <button class="e letterButton" value="e">E</button>
        <button class="f letterButton" value="f">F</button>
        <button class="g letterButton" value="g">G</button>
        <button class="h letterButton" value="h">H</button>
        <button class="i letterButton" value="i">I</button>
        <button class="j letterButton" value="j">J</button>
        <button class="k letterButton" value="k">K</button>
        <button class="l letterButton" value="l">L</button>
        <button class="m letterButton" value="m">M</button>
        <button class="n letterButton" value="n">N</button>
        <button class="o letterButton" value="o">O</button>
        <button class="p letterButton" value="p">P</button>
        <button class="q letterButton" value="q">Q</button>
        <button class="r letterButton" value="r">R</button>
        <button class="s letterButton" value="s">S</button>
        <button class="t letterButton" value="t">T</button>
        <button class="u letterButton" value="u">U</button>
        <button class="v letterButton" value="v">V</button>
        <button class="w letterButton" value="W">W</button>
        <button class="x letterButton" value="x">X</button>
        <button class="y letterButton" value="y">Y</button>
        <button class="z letterButton" value="z">Z</button> -->

        <!-- Qwerty Format -->
        <div class="keyboard rowOne">
            <button class="q letterButton" value="q">Q</button>
            <button class="w letterButton" value="W">W</button>
            <button class="e letterButton" value="e">E</button>
            <button class="r letterButton" value="r">R</button>
            <button class="t letterButton" value="t">T</button>
            <button class="y letterButton" value="y">Y</button>
            <button class="u letterButton" value="u">U</button>
            <button class="i letterButton" value="i">I</button>
            <button class="o letterButton" value="o">O</button>
            <button class="p letterButton" value="p">P</button>
        </div>

        <div class="keyboard rowTwo">
            <button class="a letterButton" value="a">A</button>
            <button class="s letterButton" value="s">S</button>
            <button class="d letterButton" value="d">D</button>
            <button class="f letterButton" value="f">F</button>
            <button class="g letterButton" value="g">G</button>
            <button class="h letterButton" value="h">H</button>
            <button class="j letterButton" value="j">J</button>
            <button class="k letterButton" value="k">K</button>
            <button class="l letterButton" value="l">L</button>
        </div>

        <div class="keyboard rowThree">
            <button class="z letterButton" value="z">Z</button>
            <button class="x letterButton" value="x">X</button>
            <button class="c letterButton" value="c">C</button>
            <button class="v letterButton" value="v">V</button>
            <button class="b letterButton" value="b">B</button>
            <button class="n letterButton" value="n">N</button>
            <button class="m letterButton" value="m">M</button>
        </div>


    <!-- JAVA LANDDDD -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
        // Initializing the hangMan object
        const hangMan = {};
        // TODO: populate more words or look into API to generate words.
        hangMan.wordArray = ['receipt', 'sunscreen', 'basketball', 'violin', 'toronto', 'hackeryou', 'lightbulb', 'iceskating', 'keyboard'];
        hangMan.charArray = [];
        hangMan.guessCnt = 10;
        hangMan.totalLetterCorrect = 0;

        // =================================================================== //
        // == Function Name: init()                                         == //
        // =================================================================== //
        // ==   Description: Randomly selects word from predetermined array == //
        // ==                and populate dynamic DIVs on page.             == //
        // =================================================================== //
        hangMan.init = function() {
            console.log("WE IN THE INIT FUNCTION");
            hangMan.setup();
            hangMan.playGame();
            hangMan.playAgain();
        };

        // =================================================================== //
        // == Function Name: setup()                                        == //
        // =================================================================== //
        // ==   Description: Randomly selects word from predetermined array == //
        // ==                and populate dynamic HTML on page, setting up  == //
        // ==                global variables.                              == //
        // =================================================================== //
        hangMan.setup = function() {
            const wordIndex = Math.floor( Math.random() * this.wordArray.length );
            this.charArray = this.wordArray[wordIndex].split('');

            for (let i = 0; i < this.charArray.length; i++) {
                $('section.guessWord').append(`<div class="letterContainer"><span class="${this.charArray[i]} guessLetter hideLetter">${this.charArray[i]}</span></div>`);
            }

            hangMan.resetCounters();
            $('span.guessCount').text(hangMan.guessCnt);
        };
        
        // =================================================================== //
        // == Function Name: resetCounters()                                == //
        // =================================================================== //
        // ==   Description: Reset counters for a fresh game.               == //
        // =================================================================== //
        hangMan.resetCounters = function() {
            hangMan.guessCnt = 10;
            hangMan.totalLetterCorrect = 0;
        };

        // =================================================================== //
        // == Function Name: winGame()                                      == //
        // =================================================================== //
        // ==   Description: Output winner text and reset counters for      == // 
        // ==                  the next game!                               == //
        // =================================================================== //
        hangMan.winGame = function() {
            $('h3').text("YOU WIN!!!");
            $('h3').addClass('addPadding');
            // User already won, so disable guessing capabilities
            $('.keyboard').addClass('hideKeyboard');
            
            hangMan.resetCounters();
        };

        // =================================================================== //
        // == Function Name: loseGame()                                     == //
        // =================================================================== //
        // ==   Description: Output loser text and reset counters for       == // 
        // ==                  the next game!                               == //
        // =================================================================== //
        hangMan.loseGame = function() {
            $('span.guessLetter').removeClass('hideLetter');
            $('span.guessLetter').addClass('showLetter');
            $('.keyboard').addClass('hideKeyboard');
            $('h3').text("YOU LOSEEEeeEEeEEE!!!");
            $('h3').addClass('addPadding');
            $('p').html('');

            hangMan.resetCounters();
        };

         // =================================================================== //
        // == Function Name: checkMatches()                                 == //
        // =================================================================== //
        // ==     Arguments: 1 - selectedLetter                             == //
        // ==   Description: Checks how many letters in the array match     == //
        // ==                  the selected letter                          == //
        // =================================================================== //
        hangMan.checkMatches = function(selectedLetter) {
            let letterCorrect = 0;
                
            for (let i = 0; i < hangMan.charArray.length; i++) {
                if (selectedLetter === hangMan.charArray[i]) {
                    hangMan.totalLetterCorrect++;
                    letterCorrect++;
                    
                    $(`span.${selectedLetter}`).removeClass('hideLetter');
                    $(`span.${selectedLetter}`).addClass('showLetter');
                    
                    if (hangMan.totalLetterCorrect === hangMan.charArray.length) {
                        hangMan.winGame();
                    }
                }
            }

            return letterCorrect;
        };

        // =================================================================== //
        // == Function Name: playGame()                                     == //
        // =================================================================== //
        // ==   Description:                                                == //
        // =================================================================== //
        hangMan.playGame = function() {
            
            $('span.guessCount').addClass('countZoom');

            // A LETTER WAS CLICKED, WOOT WOOT!
            $('.letterButton').on('click', function(){
                $('span.guessCount').removeClass('countZoom');

                // FIXME: Trying to trigger animation reflow
                $('span.guessCount').offsetWidth;
                $('span.guessCount').offsetheight;

                // Save the letter and disable the button
                const selectedValue = $(this).attr('value');
                $(this).attr('disabled', 'disabled');
            
                // OKAY, WE GOT GUESSES LEFT, PROCEED!
                if (hangMan.guessCnt > 0) {
 
                    // CHECK IF WE GOT ANYTHING RIGHT!
                    const letterCorrect = hangMan.checkMatches(selectedValue);

                    if (letterCorrect === 0) {
                        hangMan.guessCnt--;
                        $(this).addClass('incorrect');
                        
                        $('span.guessCount').text(hangMan.guessCnt);
                        $('span.guessCount').addClass('countZoom');
                        console.log(`Guesses left: ${hangMan.guessCnt}`);

                        if (hangMan.guessCnt === 1) {
                            $('p').text(`Uh oh, looks like you only have 1 guess left!`);
                        }
                    } else {
                        $(this).addClass('correct');
                    }

                    // Finished searching through the character array and no guesses left
                    if (hangMan.totalLetterCorrect < hangMan.charArray.length && hangMan.guessCnt === 0) {
                        hangMan.loseGame();
                    }
                }
            })
        };

        // =================================================================== //
        // == Function Name: playAgain()                                    == //
        // =================================================================== //
        // ==   Description: Clean up HTML and repopulate the page for a    == //
        // ==                new game of hangman!                           == //
        // =================================================================== //
        hangMan.playAgain = function() {
            $('.playAgain').on('click', function(){
                // Clean up all the stuff we disabled and changed in the HTML
                $('section.guessWord').html('');
                $('.letterButton').removeAttr('disabled');
                $('.letterButton').removeClass('incorrect');
                $('.letterButton').removeClass('correct');
                $('.keyboard').removeClass('hideKeyboard');
                $('h3').html('');
                $('h3').removeClass('addPadding');
                $('p').html('');

                // Now repopulate and set it up as a new game
                hangMan.setup();
            })
        };
        
        // =================================================================== //
        // ======================== DOCUMENT IS READY ======================== //
        // =================================================================== //
        $(document).ready(function(){
            hangMan.init();
        });

    </script>
</body>
</html>